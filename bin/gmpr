#!/usr/bin/env bash

remoteUrl=$(git config --get remote.origin.url)

remoteUrl=${remoteUrl##*git@github.com:}
remoteUrl=${remoteUrl%%.git*}

branch=$(git branch --show-current)

if [[ $remoteUrl == https://github.com/* ]]; then
    url="${remoteUrl}/compare/${branch}?expand=1"
else
    url="https://github.com/${remoteUrl}/compare/${branch}?expand=1"
fi

echo $url
open $url